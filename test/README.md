# Test Documentation
## Introduction
This **test** folder contains test cases and relative assistant tools for testing **WebNN API**.

According to [API Documentation](https://github.com/intel/webml-polyfill/blob/master/docs/api.md) and [API Info](https://github.com/intel/webml-polyfill/blob/master/src/nn/Enums.js), these test cases including:
* **Unit Tests** in `base` folder and `unit-test` folder, checking Interface, Attribute and Method to ensure meet its design and behaves as intended,
* **CTS(Compatibility Test Suite) Tests** in `cts` folder, focus on testing behaves of [supported ops](https://github.com/intel/webml-polyfill/blob/master/docs/supported_ops.md), checking compatibility on cross platforms,
* **End-to-End Tests** in `end2end-test` folder, testing using [ONNX models and sample data](https://github.com/intel/webml-polyfill/blob/master/test/end2end-test/README.md), checking model flow being performed as intended,
* **Real Model Tests** in `realmodel` folder, testing behaves of some supported ops in a [real-model](https://github.com/intel/webml-polyfill/tree/master/test/realmodel#3-supported-onnxjs-models) scenario.
```
Note: Above 4 type tests were wrote with [Mocha test framework](https://mochajs.org/).
```
* **IDL(Interface Definition Language) Tests** in `wpt` folder which were generated by [idlharness.js API](https://web-platform-tests.org/writing-tests/idlharness.html).

These relative assistant tools:
* **Accuracy Measurement** in `tool/MeasureAccuracy` folder, for checking accuracy of semantic segmentation inference result with inputing lots of images,
* **CI(Continuous Integration)**  its baseline data in `tool/CI` folder, for checking webml-polyfill repo's PRs, leveraging [Travis CI](https://travis-ci.com/) tool testing on macOS platform, [Circle CI](https://circleci.com/) tool testing on Linux platform and [AppVeyor CI](https://www.appveyor.com/) on Windows platform,
* **CTS Converter** in `cts/tool/CTSConverter` folder for converting [NN API CTS Tests](https://android.googlesource.com/platform/frameworks/ml/+/refs/tags/android-cts-10.0_r2) to these CTS test cases for WebNN API,
* **per Layer Analyzer** in `tool/perLayerAnalyzer` folder, for running **Real Model Tests**, collecting and displaying each layer's performance to help analysing,
* **Regression Checker** in `tool/RegressionChecker` folder, for checking native backend implement PRs with high quality(avoiding new problems such as crash, freeze, etc.).


## Contribute CTS test case
The CTS tests in `./cts/test` folder were converted from original Android CTS test, for new created CTS test file, please add them into `./cts/test_supplement` folder

### Steps
Here are steps to update `./cts/test_supplement/cts_supplement-all.js`:
* Copy your test file into `./cts/test_supplement`.
* Change directory into `CTSConverter`:

    ```shell
    $ cd ./cts/tool/CTSConverter
    ```

* Update `./cts/test_supplement/cts_supplement-all.js` file:

    ```shell
    $ npm run combine
    ```

    or

    ```shell
    $ python3 ./src/main.py -s ../../test_supplement -o ../../test_supplement/cts_supplement-all.js
    ```
